{"version":3,"sources":["minimux.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","dispatch","action","rerender","arguments","undefined","_typeof","Array","isArray","forEach","el","idx","hasOwnProperty","callbackOnion","middleware","sort","b","priority","reduce","nextLayer","layer","currentAction","func","coreFunction","state","containers","updater","enqueueForceUpdate","listen","type","callback","listeners","push","connect","container","apply","newMiddleware","unshift","Object","defineProperty","value","Symbol","iterator","obj","constructor"],"mappings":"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","file":"minimux.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nexports.dispatch = dispatch;\nexports.listen = listen;\nexports.connect = connect;\nexports.apply = apply;\n/*\n * Minimux v1.0.0\n * Author: Steven Barnett (stevendesu) <steven.abarnett@gmail.com>\n * License: MIT +no-false-attribs (https://spdx.org/licenses/MITNFA.html)\n *\n * I made this library because I liked the ideology of Redux, but not the\n * implementation. This is my attempt to rebuild Redux with absolute minimal\n * functionality and to allow for absolute minimal bootstrapping in order to\n * write effective code.\n *\n * Considerations:\n *  - Two of our functions (connect and apply) are one-liners... why not just\n *    make \"containers\" and \"middleware\" public?\n *  - What should be the return values of each function?\n *  - How do you UNbind middleware or DISconnect containers? Or UNlisten?\n *  - Should it be possible to connect to a subset of the state? If you could\n *    bind reducers to subsets of state then it would be more modular\n *  - Could we add support for CJS, AMD, and UMD? Maybe as a build step?\n */\n\nvar listeners = {};\nvar containers = [];\nvar middleware = [];\n\nvar state = exports.state = {};\n\n// The \"onion\" describes the layers of middleware that we must parse through\n// in order to execute our action.\nvar callbackOnion = null;\n\nvar coreFunction = function coreFunction(action) {\n\tif (listeners[action.type]) {\n\t\tlisteners[action.type].forEach(function (el) {\n\t\t\texports.state = state = el(state, action);\n\t\t});\n\t}\n\treturn state;\n};\n\nfunction dispatch(action) {\n\tvar rerender = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n\tif (\"development\" !== \"production\") {\n\t\tif ((typeof action === \"undefined\" ? \"undefined\" : _typeof(action)) !== \"object\") {\n\t\t\tthrow \"Invalid type (\" + (typeof action === \"undefined\" ? \"undefined\" : _typeof(action)) + \") for argument \\\"action\\\" passed to dispatch. Expected \" + \"object or array of objects.\";\n\t\t}\n\t\tif (Array.isArray(action)) {\n\t\t\taction.forEach(function (el, idx) {\n\t\t\t\tif ((typeof el === \"undefined\" ? \"undefined\" : _typeof(el)) !== \"object\" || Array.isArray(el)) {\n\t\t\t\t\tthrow \"Invalid type (\" + (typeof el === \"undefined\" ? \"undefined\" : _typeof(el)) + \") for action at index \" + idx + \" passed to dispatch. \" + \"Expected object.\";\n\t\t\t\t}\n\t\t\t\tif (!el.hasOwnProperty(\"type\")) {\n\t\t\t\t\tthrow \"Action at index \" + idx + \" passed to dispatch was missing required property: \\\"type\\\"\";\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (!action.hasOwnProperty(\"type\")) {\n\t\t\tthrow \"Action passed to dispatch was missing required property: \\\"type\\\"\";\n\t\t}\n\t\tif (typeof rerender !== \"boolean\") {\n\t\t\tthrow \"Invalid type (\" + (typeof rerender === \"undefined\" ? \"undefined\" : _typeof(rerender)) + \") for argument \\\"rerender\\\" passed to dispatch. Expected \" + \"boolean.\";\n\t\t}\n\t}\n\tif (callbackOnion === null) {\n\t\tmiddleware.sort(function (a, b) {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\t\tcallbackOnion = middleware.reduce(function (nextLayer, layer) {\n\t\t\treturn function (currentAction) {\n\t\t\t\treturn layer.func(currentAction, nextLayer);\n\t\t\t};\n\t\t}, coreFunction);\n\t}\n\tif (!Array.isArray(action)) {\n\t\taction = [action];\n\t}\n\taction.forEach(function (el) {\n\t\texports.state = state = callbackOnion(el);\n\t});\n\tif (rerender) {\n\t\tcontainers.forEach(function (el) {\n\t\t\tel.updater.enqueueForceUpdate(el);\n\t\t});\n\t}\n}\n\nfunction listen(type, callback) {\n\tif (\"development\" !== \"production\") {\n\t\tif (typeof type !== \"string\") {\n\t\t\tthrow \"Invalid type (\" + (typeof type === \"undefined\" ? \"undefined\" : _typeof(type)) + \") for argument \\\"type\\\" passed to listen. Expected string.\";\n\t\t}\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow \"Invalid type (\" + (typeof callback === \"undefined\" ? \"undefined\" : _typeof(callback)) + \") for argument \\\"callback\\\" passed to listen. Expected \" + \"function.\";\n\t\t}\n\t}\n\tlisteners[type] = listeners[type] || [];\n\tlisteners[type].push(callback);\n}\n\nfunction connect(container) {\n\tif (\"development\" !== \"production\") {\n\t\tif ((typeof container === \"undefined\" ? \"undefined\" : _typeof(container)) !== \"object\") {\n\t\t\tthrow \"Invalid type (\" + (typeof container === \"undefined\" ? \"undefined\" : _typeof(container)) + \") for argument \\\"container\\\" passed to listen. Expected \" + \"object.\";\n\t\t}\n\t\t// TODO: Test for ReactDOM.render() return value?\n\t\t// Maybe not, actually. I want to get rid of that dependency...\n\t}\n\tcontainers.push(container);\n}\n\nfunction apply(newMiddleware) {\n\tvar priority = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\n\tif (\"development\" !== \"production\") {\n\t\tif (typeof newMiddleware !== \"function\") {\n\t\t\tthrow \"Invalid type (\" + (typeof newMiddleware === \"undefined\" ? \"undefined\" : _typeof(newMiddleware)) + \") for argument \\\"newMiddleware\\\" passed to listen. \" + \"Expected function.\";\n\t\t}\n\t\tif (typeof priority !== \"number\") {\n\t\t\tthrow \"Invalid type (\" + (typeof priority === \"undefined\" ? \"undefined\" : _typeof(priority)) + \") for argument \\\"priority\\\" passed to listen. Expected \" + \"number.\";\n\t\t}\n\t}\n\tmiddleware.unshift({ priority: priority, func: newMiddleware });\n\t// Additional middleware was added. We need to recalulate this guy.\n\tcallbackOnion = null;\n}\n\n\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}